(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();/**
 * a-sandbox@0.0.0-alpha.2
 * a secure, synchronous, well-compatible browser sandbox with customization support
 * @author Ambit Tsai <ambit_tsai@qq.com>
 * @license MulanPSL-2.0
 */var j=window,L=Object.defineProperty,W=j.Reflect?Reflect.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function m(e,t){return typeof t=="function"&&e instanceof t}var J=["undefined","boolean","string","symbol","number","bigint"];function R(e,t,n){var i=typeof e;if(J.indexOf(i)!==-1)return e;if(i==="function")return function(d,h,p){return p.intrinsics.Function("f","return function(){return f(arguments)}")(function(w){try{for(var O=[],u=0,g=w;u<g.length;u++){var y=R(g[u],p,h);O.push(y)}return R(W(d,void 0,O),h,p)}catch(c){throw T(c,h,p)}})}(e,t,n);var r=t.intrinsics,o=n.intrinsics;if(i==="object"){if(e===null)return e;if(r.Promise&&e instanceof r.Promise)return new o.Promise(function(d,h){Promise.resolve(e).then(function(p){var w=R(p,t,n);d(w)}).catch(function(p){var w=T(p,t,n);h(w)})});var a=o.structuredClone;return a?m(e,r.ArrayBuffer)||m(e,r.MessagePort)||m(e,r.ReadableStream)||m(e,r.WritableStream)||m(e,r.TransformStream)||m(e,r.AudioData)||m(e,r.VideoFrame)||m(e,r.OffscreenCanvas)?a(e,{transfer:[e]}):m(e,r.DataView)||m(e,t.TypedArray)?a(e,{transfer:[e.buffer]}):a(e):n.str2json(n.json2str(e))}throw console.error(e),new o.TypeError("unexpected type of value")}function T(e,t,n){var i=typeof e;if(J.indexOf(i)!==-1)return e;var r=t.intrinsics,o=n.intrinsics;if(i==="object"){if(!e||e instanceof o.Object)return e;var a=e.name,d=e.message;if(typeof a=="string"&&typeof d=="string"){if(e instanceof r.DOMException)return new o.DOMException(d,a);if(e instanceof r.Error&&/^[A-Z]/.test(a)&&/Error$/.test(a))return new(o[a]||o.Error)(d)}}return console.error(e),new o.Error("unexpected error from sandbox")}var H=Object.freeze({__proto__:null,Global:j,define:L,apply:W,getWrappedValue:R,wrapError:T,globalReservedProps:["globalThis","Infinity","NaN","undefined","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","AggregateError","Array","ArrayBuffer","Atomics","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","Error","EvalError","FinalizationRegistry","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","Proxy","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","Symbol","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakRef","WeakSet","Atomics","JSON","Math","Reflect","atob","btoa","clearInterval","setInterval","clearTimeout","setTimeout","console","escape","unescape","structuredClone","window","Blob","File","FileReader","Crypto","crypto","CryptoKey","SubtleCrypto","DOMException","FormData","Intl","ReadableStream","WritableStream","TransformStream","TextDecoder","TextDecoderStream","TextEncoder","TextEncoderStream","URL","URLSearchParams"]}),q="("+function(e){var t,n=window,i=n.EventTarget,r=n.Function,o=n.Int8Array,a=n.Object,d=n.String.prototype.replace,h=n.SyntaxError,p=n.Symbol,w=n.JSON,O=a.getOwnPropertyNames,u=e.apply,g=e.define,y={},c={},l=!0,F=/(^|[^.$])(\bimport\s*(\(|\/[/*]))/g,N="$1__$2",U={globalThis:function(){return{configurable:l,writable:l,value:c}},window:function(){return{enumerable:l,value:c}},Function:function(){var v=r.toString,f=function(){var b=u(r,t,arguments),A=u(v,b,[]);A=u(d,A,[F,N]);var $=r(A='with(this)return function(){"use strict";return '+A+"}()"),k=u($,c,[]);return function(){return u(k,this===n?t:this,arguments)}};return f.prototype=r.prototype,f.prototype.constructor=f,{configurable:l,writable:l,value:f}},clearInterval:function(){return{configurable:l,enumerable:l,writable:l,value:function(v){u(y.clearInterval,t,[v])}}},clearTimeout:function(){return{configurable:l,enumerable:l,writable:l,value:function(v){u(y.clearTimeout,t,[v])}}},setInterval:B("setInterval"),setTimeout:B("setTimeout")};p&&p.unscopables&&g(c,p.unscopables,{value:a.seal(a.create(null))});for(var I=0,C=O(n);I<C.length;I++){var s=C[I];y[s]=n[s];var D=e.globalReservedProps.indexOf(s)!==-1,P=a.getOwnPropertyDescriptor(n,s);if(D){var x=P;U[s]?x=U[s]():x.get&&(x.value=n[s],delete x.get,delete x.set),g(c,s,x)}P.configurable?delete n[s]:P.writable?n[s]=t:D||g(c,s,{value:t})}if(i)for(var S=0,_=O(i.prototype);S<_.length;S++)s=_[S],g(n,s,{value:t});return g(c,"__import",{value:function(){throw new h("not support dynamic import")}}),V(),{intrinsics:y,globalObject:c,TypedArray:a.getPrototypeOf(o),str2json:w.parse,json2str:w.stringify};function V(){var v,f=!1,E=(v=r("with(this)return eval(arguments[0])"),function(b){return b=u(d,'"use strict";undefined;'+b,[F,N]),c.eval=y,u(v,c,[b])});g(c,"eval",{configurable:!1,get:function(){return f?(f=!1,y.eval):E},set:function(b){f=b===y}})}function B(v){return function(){return{configurable:l,enumerable:l,writable:l,value:function(f){var E=arguments;if(typeof f=="function"){var b=f;E[0]=function(){u(b,c,arguments)}}else if(typeof f=="string"){var A=f;E[0]=function(){return c.eval(A)}}return u(y[v],t,E)}}}}}.toString()+")",M={},z=function(){function e(t){t===void 0&&(t={});var n=function(){var r=document.createElement("iframe");document.head.appendChild(r);var o=r.contentWindow.eval(q)(H);return o.iframe=r,o}(),i={innerRealm:n,outerRealm:{intrinsics:j,TypedArray:Object.getPrototypeOf(Int8Array),str2json:JSON.parse,json2str:JSON.stringify},options:t};L(this,"_getPrivate",{value:function(r){if(r===M)return i}}),t.onInit&&t.onInit(n)}return e.prototype.evaluate=function(t){if(typeof t!="string")throw new TypeError('"evaluate" expects a string');var n=this._getPrivate(M),i=n.innerRealm,r=n.outerRealm;try{return R(i.globalObject.eval(t),i,r)}catch(o){throw T(o,i,r)}},e.prototype.evaluateHandle=function(t){if(typeof t!="function")throw new TypeError('"evaluateHandle" expects a function');return this.evaluate("("+t.toString()+")()")},e}();window.Sandbox=z;const K=`
class Sandbox {
    constructor(options?: {
        onInit: (realm: Realm) => void;
    });
    evaluate(sourceText: string): any;
    evaluateHandle(func: (this: undefined) => any): any;
}

window.Sandbox = Sandbox;

`;setTimeout(()=>{const e=document.querySelector(".code");e.textContent=K});
